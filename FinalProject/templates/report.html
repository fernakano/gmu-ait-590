<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <link href="https://cdn.muicss.com/mui-0.10.3/css/mui.min.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdn.muicss.com/mui-0.10.3/js/mui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
</head>

<body>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const candidate = JSON.parse(unescape(urlParams.get('candidate')));
    // document.body.innerText = JSON.stringify(candidate)

</script>

<div class="mui-container-fluid">
    <div class="mui-col-sm-10 mui-col-sm-offset-1">
        <div class="mui-panel">

            <div class="mui--text-title"> User Name: {{candidate['name']}}</div>
            <div class="mui--text-title"> Job Profile: {{candidate['job_profile']}}</div>
            <div style="color:forestgreen;" class="mui--text-title"> Good Fit!</div>
            <div style="color:forestgreen;" class="mui--text-title"> Score: 80%</div>
            <br><br>
            <div class="mui--text-title"> Screener Summary</div>
            <div class="mui--text-subhead"> Job Matches:</div>
            <table class="mui-table">
                <thead>
                <tr>
                    <th>Match Number</th>
                    <th>Job Description</th>
                <tr>
                </thead>
                <tbody>
                {% for job in candidate['job_matches'] %}
                <tr>
                    <td>{{loop.index0+1}}</td>
                    <td>{{ job }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>

            <div class="mui--text-subhead"> Behavioral Questions:</div>
            <table class="mui-table">
                <thead>
                <tr>
                    <th>Question Number</th>
                    <th>Behavioral Answer</th>
                    <th>sentiment</th>
                <tr>
                </thead>
                <tbody>
                {% for question in candidate['behavioral_questions'] %}
                <tr>
                    <td>{{loop.index0+1}}</td>
                    <td>{{ question }}</td>
                    <td>{{ candidate['behavioral_sentiments'][loop.index0] }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
            <br><br>
            <div class="mui--text-title"> Job Recommendation</div>
            TODO Add Beautiful Job Recommendations
            <br><br>
            <div class="mui--text-title"> Visualizations</div>
            TODO Add Beautiful visualizations
            <br><br>
            <div id="skillMap"></div>
            <div id="skillRadar"></div>
            <script>
                var options = {
                    series: [
                        {
                            data: [
                                {
                                    x: 'Java',
                                    y: 218
                                },
                                {
                                    x: 'Python',
                                    y: 149
                                },
                                {
                                    x: 'NLP',
                                    y: 184
                                },
                                {
                                    x: 'Development',
                                    y: 55
                                },
                                {
                                    x: 'Management',
                                    y: 84
                                },
                                {
                                    x: 'SQL',
                                    y: 31
                                },
                                {
                                    x: 'Javascript',
                                    y: 70
                                },
                                {
                                    x: 'NodeJs',
                                    y: 30
                                },
                                {
                                    x: 'Big Data',
                                    y: 44
                                }
                            ]
                        }
                    ],
                    legend: {
                        show: false
                    },
                    chart: {
                        height: 350,
                        type: 'treemap'
                    },
                    title: {
                        text: 'Skills Demand'
                    }
                };
                console.log(options)
                var chart = new ApexCharts(document.querySelector("#skillMap"), options);
                chart.render();


                var options = {
                    series: [{
                        name: 'Series 1',
                        data: [60, 70, 100, 100, 100, 80],
                    }],
                    chart: {
                        height: 350,
                        type: 'radar',
                    },
                    title: {
                        text: 'Candidate Fit'
                    },
                    xaxis: {
                        categories: ['Technical', 'Behavior', 'Management', 'Location', 'Experience', 'SystemMatch']
                    }
                };

                var chart = new ApexCharts(document.querySelector("#skillRadar"), options);
                chart.render();

            </script>
        </div>
    </div>
</div>
</body>
</html>
